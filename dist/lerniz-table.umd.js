(function(r,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(r=typeof globalThis<"u"?globalThis:r||self,e(r.LernizTable={},r.Vue))})(this,function(r,e){"use strict";const z={key:0,style:{height:"350px"},class:"classBigUniqueTableDFlex classBigUniqueTableJustifyCenter classBigUniqueTableAlignCenter"},v=["id"],F={class:"classBigUniqueTableFixedColumn"},V={key:1,class:"classBigUniqueTableBlankArea classBigUniqueTableDFlex classBigUniqueTableJustifyCenter classBigUniqueTableAlignCenter",style:{width:"100%","background-color":"transparent"}},T=e.defineComponent({__name:"lerniz-table",props:{isLoadingTable:Boolean,tableID:{type:String,default:"table"},zoom:{type:[Number,String],default:100},height:{type:Number,default:0},showTable:{type:Boolean,default:!0}},setup(d){const i=d,m=e.ref(null),B=e.ref(null),y=e.ref(null),a=e.ref(null),k=e.ref(0),S=e.ref(0),U=e.ref(0),q=e.ref(0),C=e.ref(!1),E=e.ref(!1),f=e.ref(!1),u=e.ref(!1),g=e.ref(!1),D=e.computed(()=>{const t=Number(i.zoom);return t<25?25:t>200?200:t}),H=e.computed(()=>D.value*.9/100),I=e.computed(()=>i.height===0?k.value-S.value-U.value-q.value:i.height),b=()=>{var t,l;if(!(typeof window>"u")){if(k.value=window.innerHeight,g.value=window.innerWidth<600,m.value){const o=m.value.getBoundingClientRect();S.value=o.top}U.value=((t=B.value)==null?void 0:t.offsetHeight)||0,q.value=((l=y.value)==null?void 0:l.offsetHeight)||0,document.body.style.overflow=g.value?"hidden":"visible"}},N=()=>{if(!a.value)return;const{scrollTop:t,scrollLeft:l}=a.value;C.value=t>0,E.value=l>0,f.value=l>0,u.value=t>0},R=t=>{if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t.key))return;const l=t.target;if(!l)return;const o=Number(l.getAttribute("data-row")),n=Number(l.getAttribute("data-col"));if(isNaN(o)||isNaN(n))return;t.preventDefault();const s=Array.from(a.value.querySelectorAll("input[data-row][data-col]"));if(s.length===0)return;const c=Math.max(...s.map(w=>Number(w.getAttribute("data-row")))),A=Math.max(...s.map(w=>Number(w.getAttribute("data-col"))));let h=o,p=n;switch(t.key){case"ArrowUp":h=o===0?c:o-1;break;case"ArrowDown":h=o===c?0:o+1;break;case"ArrowLeft":p=n===0?A:n-1;break;case"ArrowRight":p=n===A?0:n+1;break}const L=a.value.querySelector(`input[data-row="${h}"][data-col="${p}"]`);L&&L.focus()},$=t=>{const l=a.value;if(!l)return;const o=t.getBoundingClientRect(),n=l.getBoundingClientRect(),s=45,c=80;o.left<n.left+s&&(l.scrollLeft-=n.left+s-o.left),o.right>n.right&&(l.scrollLeft+=o.right-n.right),o.top<n.top+c&&(l.scrollTop-=n.top+c-o.top),o.bottom>n.bottom&&(l.scrollTop+=o.bottom-n.bottom)},x=t=>{const l=t.target;l&&l.tagName==="INPUT"&&l.hasAttribute("data-row")&&(l.select(),$(l))};return e.watch(g,()=>{setTimeout(()=>{b()},50)}),e.onMounted(()=>{var t,l,o;typeof window>"u"||(b(),window.addEventListener("resize",b),(t=a.value)==null||t.addEventListener("scroll",N),(l=a.value)==null||l.addEventListener("keydown",R),(o=a.value)==null||o.addEventListener("focusin",x,!0))}),e.onBeforeUnmount(()=>{var t,l,o;typeof window>"u"||(window.removeEventListener("resize",b),(t=a.value)==null||t.removeEventListener("scroll",N),(l=a.value)==null||l.removeEventListener("keydown",R),(o=a.value)==null||o.removeEventListener("focusin",x,!0))}),(t,l)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"boxRef",ref:m,class:"theme-lerniz-table classBigUniqueTableDFlex classBigUniqueTableFlexColumn",id:"box"},[e.createElementVNode("div",{ref_key:"toolbarTopRef",ref:B,class:"classBigUniqueTableTollbarTop",id:"toolbar-top"},[e.renderSlot(t.$slots,"toolbar-top")],512),e.createElementVNode("div",{ref_key:"tableWrapperRef",ref:a,class:"classBigUniqueTableTableWrapper align-stretch classBigUniqueTableNiceScroll",style:e.normalizeStyle({height:I.value+"px"}),id:"table"},[i.isLoadingTable?(e.openBlock(),e.createElementBlock("div",z,l[0]||(l[0]=[e.createElementVNode("div",{class:"classBigUniqueTableSpinner"},null,-1)]))):(e.openBlock(),e.createElementBlock("div",{key:1,id:i.tableID},[d.showTable?(e.openBlock(),e.createElementBlock("table",{key:0,class:e.normalizeClass(["classBigUniqueTableFixedTable",{classBigUniqueTableShadowRightCol:E.value}]),style:e.normalizeStyle({"font-size":H.value+"rem"})},[e.createElementVNode("thead",{class:e.normalizeClass(["classBigUniqueTableFixedThead",{classBigUniqueTableShadowUnder:C.value}])},[e.createElementVNode("tr",null,[e.createElementVNode("th",{class:e.normalizeClass({classBigUniqueTableShadowFirstCellRight:f.value&&!u.value,classBigUniqueTableShadowFirstCellBottom:u.value&&!f.value,classBigUniqueTableShadowFirstCellAll:u.value&&f.value})},[e.renderSlot(t.$slots,"first-cell")],2),e.renderSlot(t.$slots,"columns")])],2),e.createElementVNode("tbody",F,[e.renderSlot(t.$slots,"rows")])],6)):(e.openBlock(),e.createElementBlock("div",V,[e.renderSlot(t.$slots,"blank")]))],8,v))],4),e.createElementVNode("div",{ref_key:"toolbarBottomRef",ref:y,id:"toolbar-bottom"},[e.renderSlot(t.$slots,"toolbar-bottom")],512)],512))}}),_={install:d=>{d.component("LernizTable",T)}};r.LernizTable=T,r.default=_,Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
