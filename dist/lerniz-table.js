"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),_={key:0,style:{height:"350px"},class:"classBigUniqueTableDFlex classBigUniqueTableJustifyCenter classBigUniqueTableAlignCenter"},D=["id"],H={class:"classBigUniqueTableFixedColumn"},V={key:1,class:"classBigUniqueTableBlankArea classBigUniqueTableDFlex classBigUniqueTableJustifyCenter classBigUniqueTableAlignCenter",style:{width:"100%","background-color":"transparent"}},A=e.defineComponent({__name:"lerniz-table",props:{isLoadingTable:Boolean,tableID:{type:String,default:"table"},zoom:{type:[Number,String],default:100},height:{type:Number,default:0},showTable:{type:Boolean,default:!0}},setup(c){const s=c,b=e.ref(null),w=e.ref(null),p=e.ref(null),n=e.ref(null),T=e.ref(0),B=e.ref(0),y=e.ref(0),k=e.ref(0),S=e.ref(!1),U=e.ref(!1),u=e.ref(!1),d=e.ref(!1),g=e.ref(!1),x=e.computed(()=>{const t=Number(s.zoom);return t<25?25:t>200?200:t}),L=e.computed(()=>x.value*.9/100),z=e.computed(()=>s.height===0?T.value-B.value-y.value-k.value:s.height),f=()=>{var t,l;if(!(typeof window>"u")){if(T.value=window.innerHeight,g.value=window.innerWidth<600,b.value){const o=b.value.getBoundingClientRect();B.value=o.top}y.value=((t=w.value)==null?void 0:t.offsetHeight)||0,k.value=((l=p.value)==null?void 0:l.offsetHeight)||0,document.body.style.overflow=g.value?"hidden":"visible"}},q=()=>{if(!n.value)return;const{scrollTop:t,scrollLeft:l}=n.value;S.value=t>0,U.value=l>0,u.value=l>0,d.value=t>0},C=t=>{if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t.key))return;const l=t.target;if(!l)return;const o=Number(l.getAttribute("data-row")),a=Number(l.getAttribute("data-col"));if(isNaN(o)||isNaN(a))return;t.preventDefault();const r=Array.from(n.value.querySelectorAll("input[data-row][data-col]"));if(r.length===0)return;const i=Math.max(...r.map(v=>Number(v.getAttribute("data-row")))),N=Math.max(...r.map(v=>Number(v.getAttribute("data-col"))));let m=o,h=a;switch(t.key){case"ArrowUp":m=o===0?i:o-1;break;case"ArrowDown":m=o===i?0:o+1;break;case"ArrowLeft":h=a===0?N:a-1;break;case"ArrowRight":h=a===N?0:a+1;break}const R=n.value.querySelector(`input[data-row="${m}"][data-col="${h}"]`);R&&R.focus()},F=t=>{const l=n.value;if(!l)return;const o=t.getBoundingClientRect(),a=l.getBoundingClientRect(),r=45,i=80;o.left<a.left+r&&(l.scrollLeft-=a.left+r-o.left),o.right>a.right&&(l.scrollLeft+=o.right-a.right),o.top<a.top+i&&(l.scrollTop-=a.top+i-o.top),o.bottom>a.bottom&&(l.scrollTop+=o.bottom-a.bottom)},E=t=>{const l=t.target;l&&l.tagName==="INPUT"&&l.hasAttribute("data-row")&&(l.select(),F(l))};return e.watch(g,()=>{setTimeout(()=>{f()},50)}),e.onMounted(()=>{var t,l,o;typeof window>"u"||(f(),window.addEventListener("resize",f),(t=n.value)==null||t.addEventListener("scroll",q),(l=n.value)==null||l.addEventListener("keydown",C),(o=n.value)==null||o.addEventListener("focusin",E,!0))}),e.onBeforeUnmount(()=>{var t,l,o;typeof window>"u"||(window.removeEventListener("resize",f),(t=n.value)==null||t.removeEventListener("scroll",q),(l=n.value)==null||l.removeEventListener("keydown",C),(o=n.value)==null||o.removeEventListener("focusin",E,!0))}),(t,l)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"boxRef",ref:b,class:"theme-lerniz-table classBigUniqueTableDFlex classBigUniqueTableFlexColumn",id:"box"},[e.createElementVNode("div",{ref_key:"toolbarTopRef",ref:w,class:"classBigUniqueTableTollbarTop",id:"toolbar-top"},[e.renderSlot(t.$slots,"toolbar-top")],512),e.createElementVNode("div",{ref_key:"tableWrapperRef",ref:n,class:"classBigUniqueTableTableWrapper align-stretch classBigUniqueTableNiceScroll",style:e.normalizeStyle({height:z.value+"px"}),id:"table"},[s.isLoadingTable?(e.openBlock(),e.createElementBlock("div",_,l[0]||(l[0]=[e.createElementVNode("div",{class:"classBigUniqueTableSpinner"},null,-1)]))):(e.openBlock(),e.createElementBlock("div",{key:1,id:s.tableID},[c.showTable?(e.openBlock(),e.createElementBlock("table",{key:0,class:e.normalizeClass(["classBigUniqueTableFixedTable",{classBigUniqueTableShadowRightCol:U.value}]),style:e.normalizeStyle({"font-size":L.value+"rem"})},[e.createElementVNode("thead",{class:e.normalizeClass(["classBigUniqueTableFixedThead",{classBigUniqueTableShadowUnder:S.value}])},[e.createElementVNode("tr",null,[e.createElementVNode("th",{class:e.normalizeClass({classBigUniqueTableShadowFirstCellRight:u.value&&!d.value,classBigUniqueTableShadowFirstCellBottom:d.value&&!u.value,classBigUniqueTableShadowFirstCellAll:d.value&&u.value})},[e.renderSlot(t.$slots,"first-cell")],2),e.renderSlot(t.$slots,"columns")])],2),e.createElementVNode("tbody",H,[e.renderSlot(t.$slots,"rows")])],6)):(e.openBlock(),e.createElementBlock("div",V,[e.renderSlot(t.$slots,"blank")]))],8,D))],4),e.createElementVNode("div",{ref_key:"toolbarBottomRef",ref:p,id:"toolbar-bottom"},[e.renderSlot(t.$slots,"toolbar-bottom")],512)],512))}}),I={install:c=>{c.component("LernizTable",A)}};exports.LernizTable=A;exports.default=I;
